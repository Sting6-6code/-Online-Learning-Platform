
1.0&Sting6-6code_-Online-Learning-PlatformJavaFrontend"1763056600498*java2.Bƒ 
M
Hsrc/test/java/com/olp/model/payment/SubscriptionBillingWorkflowTest.java2
	
type3
	
TEST4


module-key5

online-learning-platform6

package8
3
.online-learning-platform:com.olp.model.payment9
;
5com.olp.model.payment.SubscriptionBillingWorkflowTest11

class12

access13

public14

simple-name15
%
SubscriptionBillingWorkflowTest16
f
`com.olp.model.payment.SubscriptionBillingWorkflowTest#testCompleteSubscriptionBillingWorkflow()V18

method19
-
'testCompleteSubscriptionBillingWorkflow20
 
org.junit.jupiter.api.Test22

unknown23

annotated by24


uses25
(
"com.olp.model.payment.Subscription27

is type28

calls29
1
+com.olp.model.payment.Subscription$PlanType31


references32
9
3com.olp.model.payment.Subscription$PlanType.Monthly34
&
 org.junit.jupiter.api.Assertions36
l
forg.junit.jupiter.api.Assertions#assertEquals(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/String;)V38
/
)com.olp.model.payment.Subscription$Status40
5
/com.olp.model.payment.Subscription$Status.Trial42

returns43
_
Ycom.olp.model.payment.Subscription#getStatus()Lcom/olp/model/payment/Subscription$Status;45
#
com.olp.model.payment.Payment47
1
+com.olp.model.payment.Payment$PaymentStatus49
9
3com.olp.model.payment.Payment$PaymentStatus.Pending51
\
Vcom.olp.model.payment.Payment#getStatus()Lcom/olp/model/payment/Payment$PaymentStatus;53
4
.com.olp.model.payment.Payment#markSucceeded()Z55
G
Aorg.junit.jupiter.api.Assertions#assertTrue(ZLjava/lang/String;)V57
;
5com.olp.model.payment.Payment$PaymentStatus.Succeeded59
[
Uorg.junit.jupiter.api.Assertions#assertNotNull(Ljava/lang/Object;Ljava/lang/String;)V61
>
8com.olp.model.payment.Payment#getPaidAt()Ljava/sql/Date;63
9
3com.olp.model.payment.Subscription#chargeSuccess()Z65
6
0com.olp.model.payment.Subscription$Status.Active67
J
Dcom.olp.model.payment.Subscription#getNextBillingAt()Ljava/sql/Date;69
1
+com.olp.model.payment.Payment#markFailed()Z71
8
2com.olp.model.payment.Payment$PaymentStatus.Failed73
6
0com.olp.model.payment.Subscription#chargeFail()Z75
7
1com.olp.model.payment.Subscription$Status.PastDue77
K
Ecom.olp.model.payment.Subscription#setNextBillingAt(Ljava/sql/Date;)Z79
7
1com.olp.model.payment.Subscription#graceExpire()Z81
9
3com.olp.model.payment.Subscription$Status.Suspended83
Q
Kcom.olp.model.payment.SubscriptionBillingWorkflowTest#testRefundWorkflow()V85

testRefundWorkflow86
6
0com.olp.model.payment.Payment#initiateRefund(D)Z88
;
5com.olp.model.payment.Payment$PaymentStatus.Refunding90
"
com.olp.model.payment.Refund92
T
Ncom.olp.model.payment.Payment#getPaymentRefund()Lcom/olp/model/payment/Refund;94
K
Eorg.junit.jupiter.api.Assertions#assertEquals(DDDLjava/lang/String;)V96
/
)com.olp.model.payment.Refund#getAmount()D98
C
<com.olp.model.payment.Refund#getRequestedAt()Ljava/sql/Date;100
Y
Rorg.junit.jupiter.api.Assertions#assertNull(Ljava/lang/Object;Ljava/lang/String;)V102
C
<com.olp.model.payment.Refund#getProcessedAt()Ljava/sql/Date;104
D
=com.olp.model.payment.Refund#setProcessedAt(Ljava/sql/Date;)Z106
`
Ycom.olp.model.payment.SubscriptionBillingWorkflowTest#testSubscriptionStateTransitions()V108
'
 testSubscriptionStateTransitions109
[
Torg.junit.jupiter.api.Assertions#assertEquals(Ljava/lang/Object;Ljava/lang/Object;)V111
3
,com.olp.model.payment.Subscription#cancel()Z113
:
3com.olp.model.payment.Subscription$Status.Cancelled115
[
Tcom.olp.model.payment.SubscriptionBillingWorkflowTest#testPaymentStateTransitions()V117
"
testPaymentStateTransitions118
J
Corg.junit.jupiter.api.Assertions#assertNotNull(Ljava/lang/Object;)V120
R
Kcom.olp.model.payment.SubscriptionBillingWorkflowTest#testWorkflowGuards()V122

testWorkflowGuards123
I
Borg.junit.jupiter.api.Assertions#assertFalse(ZLjava/lang/String;)V125
W
Pcom.olp.model.payment.SubscriptionBillingWorkflowTest#testNextBillingAtUpdate()V127

testNextBillingAtUpdate128

com.olp.util.Utils130
D
=com.olp.util.Utils#addMonths(Ljava/sql/Date;I)Ljava/sql/Date;132
9
2com.olp.model.payment.Subscription$PlanType.Annual134J#
!
1
12

3
4

5
6Z

7
7982


5
6j®

129
12913023

119
11912023

91
919223

54
545523

56
565723

26
262723

52
525323

37
373823

99
9910023

66
666723

44
444523

93
939423

87
878823

70
707123

58
585923

21
212223
B
84<
848519 *
1R R(210:7B


13
14


15
86

80
808123

68
686923

48
484923

112
11211323

50
505123

78
787923

39
394023

101
10110223

124
12412523

131
13113223

97
979823
F
107?
10710819 *
1| |(210:7B


13
14

15
109

105
10510623

103
10310423

72
727323
H
116A
11611719 *
1Ø Ø(210:7B


13
14

15
118
B
17<
171819 *
1 (210:7B


13
14


15
20

74
747523

89
899023

133
13313423

30
303123

33
333423
H
126A
12612719 *
1Ù Ù(210:7B


13
14

15
128

62
626323

82
828323

76
767723

41
414223

64
646523

110
11011123
>
108
101112 *
1 (-:7B


13
14


15
16

46
464723

114
11411523

35
353623
H
121A
12112219 *
1“ “(210:7B


13
14

15
123

60
606123

95
959623rãb

172124*
1 (

172125*
1 (


172628*
1 ("

172625*
1	 (

172629*
1) (5

172625*
1 (

173025*
1 ("

173032*
1 ("

173025*
1# (*

173332*
1# (*

173532*
1	 (

173729*
1	 (

172625*
1 ("

173925*
1# ()

173932*
1# ()

173925*
1* (/

174132*
1* (/

173943*
11 (=

172632*
11 (=

174429*
1> (G

174628*
1 (

174625*
1	 (

174629*
1  ('

174625*
1   (

174825*
1   ("

174832*
1   ("

174825*
1 #  (*

175032*
1 #  (*

173532*
1$	 $(

173729*
1$	 $(

174625*
1$ $(

174825*
1$ $(+

174832*
1$ $(+

174825*
1$, $(3

175032*
1$, $(3

174843*
1$5 $(=

174632*
1$5 $(=

175229*
1$> $(G

174632*
1' '(%

175429*
1'& '(3

173532*
1(	 ((

175629*
1(	 ((

173532*
1)	 )(

173729*
1)	 )(

174625*
1) )(

174825*
1) )(+

174832*
1) )(+

174825*
1), )(5

175832*
1), )(5

174843*
1)7 )(?

174632*
1)7 )(?

175229*
1)@ )(I

173532*
1*	 *(

176029*
1*	 *(

174632*
1* *(

176229*
1*  *()

172632*
1- -('

176429*
1-( -(5

173532*
1.	 .(

175629*
1.	 .(

173532*
1/	 /(

173729*
1/	 /(

172625*
1/ /("

173925*
1/# /()

173932*
1/# /()

173925*
1/* /(0

176632*
1/* /(0

173943*
1/2 /(>

172632*
1/2 /(>

174429*
1/? /(H

173532*
10	 0(

176029*
10	 0(

172632*
10 0(#

176829*
10$ 0(4

174628*
14 4(

174625*
14	 4(

174629*
14  4('

174625*
17 7(

174825*
17 7("

174832*
17 7("

174825*
17# 7(*

175032*
17# 7(*

173532*
1;	 ;(

173729*
1;	 ;(

174625*
1; ;(

174825*
1; ;(+

174832*
1; ;(+

174825*
1;, ;(3

175032*
1;, ;(3

174843*
1;5 ;(=

174632*
1;5 ;(=

175229*
1;> ;(G

174632*
1> >("

177029*
1># >(-

173532*
1?	 ?(

175629*
1?	 ?(

173532*
1@	 @(

173729*
1@	 @(

174625*
1@ @(

174825*
1@ @(+

174832*
1@ @(+

174825*
1@, @(2

177232*
1@, @(2

174843*
1@4 @(<

174632*
1@4 @(<

175229*
1@= @(F

172632*
1C  C(,

177429*
1C- C(7

173532*
1D	 D(

175629*
1D	 D(

173532*
1E	 E(

173729*
1E	 E(

172625*
1E E("

173925*
1E# E()

173932*
1E# E()

173925*
1E* E(1

177632*
1E* E(1

173943*
1E3 E(?

172632*
1E3 E(?

174429*
1E@ E(I

172632*
1J	 J(

177829*
1J J(&

172632*
1K K('

178029*
1K( K(3

173532*
1L	 L(

175629*
1L	 L(

173532*
1M	 M(

173729*
1M	 M(

172625*
1M M("

173925*
1M# M()

173932*
1M# M()

173925*
1M* M(3

178232*
1M* M(3

173943*
1M5 M(A

172632*
1M5 M(A

174429*
1MB M(K

842124*
1R R(

842125*
1R R(


842628*
1W W("

842625*
1W	 W(

842629*
1W) W(5

842625*
1Y Y(

843025*
1Y Y("

843032*
1Y Y("

843025*
1Y# Y(*

843332*
1Y# Y(*

844628*
1_ _(

844625*
1_	 _(

844629*
1_ _(&

844625*
1b b(

844825*
1b b("

844832*
1b b("

844825*
1b# b(*

845032*
1b# b(*

844632*
1f	 f(

845429*
1f f(

843532*
1g	 g(

843729*
1g	 g(

844625*
1g g(

844825*
1g g(+

844832*
1g g(+

844825*
1g, g(5

845832*
1g, g(5

844843*
1g7 g(>

844632*
1g7 g(>

845229*
1g? g(H

844632*
1j j(#

848729*
1j$ j(2

843532*
1k	 k(

845629*
1k	 k(

843532*
1l	 l(

843729*
1l	 l(

844625*
1l l(

844825*
1l l(+

844832*
1l l(+

844825*
1l, l(5

848932*
1l, l(5

844843*
1l7 l(>

844632*
1l7 l(>

845229*
1l? l(H

843532*
1m	 m(

846029*
1m	 m(

849143*
1m m(

844632*
1m m(

849329*
1m m(/

849128*
1n n(

849125*
1n	 n(

849143*
1n n( 

844632*
1n n( 

849329*
1n! n(1

843532*
1o	 o(

849529*
1o	 o(

849132*
1o o("

849729*
1o# o(,

843532*
1p	 p(

846029*
1p	 p(

849132*
1p p(

849929*
1p p(,

843532*
1q	 q(

8410129*
1q	 q(

849132*
1q q(

8410329*
1q q()

849132*
1u	 u(

8410529*
1u u(

843532*
1v	 v(

846029*
1v	 v(

849132*
1v v(

8410329*
1v v(,

843532*
1w	 w(

843729*
1w	 w(

849132*
1w# w()

8410329*
1w* w(8

1072124*
1| |(

1072125*
1| |(


1072628*
1Ä Ä("

1072625*
1Ä	 Ä(

1072629*
1Ä) Ä(5

1072625*
1Ç Ç(

1073025*
1Ç Ç("

1073032*
1Ç Ç("

1073025*
1Ç# Ç(*

1073332*
1Ç# Ç(*

1073532*
1à	 à(

10711029*
1à	 à(

1072625*
1à à("

1073925*
1à# à()

1073932*
1à# à()

1073925*
1à* à(/

1074132*
1à* à(/

1073943*
1à1 à(=

1072632*
1à1 à(=

1074429*
1à> à(G

1074628*
1å å(

1074625*
1å	 å(

1074629*
1å  å('

1074625*
1è è(

1074825*
1è è("

1074832*
1è è("

1074825*
1è# è(,

1075832*
1è# è(,

1072632*
1ì	 ì(

1076429*
1ì ì(#

1073532*
1î	 î(

10711029*
1î	 î(

1072625*
1î î("

1073925*
1î# î()

1073932*
1î# î()

1073925*
1î* î(0

1076632*
1î* î(0

1073943*
1î2 î(>

1072632*
1î2 î(>

1074429*
1î? î(H

1074628*
1ò ò(

1074625*
1ò	 ò(

1074629*
1ò  ò('

1074625*
1õ õ(

1074825*
1õ õ("

1074832*
1õ õ("

1074825*
1õ# õ()

1077232*
1õ# õ()

1072632*
1ü	 ü(

1077429*
1ü ü( 

1073532*
1†	 †(

10711029*
1†	 †(

1072625*
1† †("

1073925*
1†# †()

1073932*
1†# †()

1073925*
1†* †(1

1077632*
1†* †(1

1073943*
1†3 †(?

1072632*
1†3 †(?

1074429*
1†@ †(I

1072632*
1§	 §(

1077829*
1§ §(&

1072632*
1•	 •(

1078029*
1• •(!

1073532*
1¶	 ¶(

10711029*
1¶	 ¶(

1072625*
1¶ ¶("

1073925*
1¶# ¶()

1073932*
1¶# ¶()

1073925*
1¶* ¶(3

1078232*
1¶* ¶(3

1073943*
1¶5 ¶(A

1072632*
1¶5 ¶(A

1074429*
1¶B ¶(K

1072632*
1©	 ©(

10711229*
1© ©(

1073532*
1™	 ™(

10711029*
1™	 ™(

1072625*
1™ ™("

1073925*
1™# ™()

1073932*
1™# ™()

1073925*
1™* ™(3

10711432*
1™* ™(3

1073943*
1™5 ™(A

1072632*
1™5 ™(A

1074429*
1™B ™(K

1162124*
1Ø Ø(

1162125*
1Ø Ø(


1162628*
1≥ ≥("

1162625*
1≥	 ≥(

1162629*
1≥) ≥(5

1162625*
1µ µ(

1163025*
1µ µ("

1163032*
1µ µ("

1163025*
1µ# µ(*

1163332*
1µ# µ(*

1164628*
1ª ª(

1164625*
1ª	 ª(

1164629*
1ª ª(&

1164625*
1æ æ(

1164825*
1æ æ("

1164832*
1æ æ("

1164825*
1æ# æ(*

1165032*
1æ# æ(*

1163532*
1ƒ	 ƒ(

11611029*
1ƒ	 ƒ(

1164625*
1ƒ ƒ(

1164825*
1ƒ ƒ(+

1164832*
1ƒ ƒ(+

1164825*
1ƒ, ƒ(3

1165032*
1ƒ, ƒ(3

1164843*
1ƒ5 ƒ(<

1164632*
1ƒ5 ƒ(<

1165229*
1ƒ= ƒ(F

1164632*
1«	 «(

1165429*
1« «(

1163532*
1»	 »(

11611029*
1»	 »(

1164625*
1» »(

1164825*
1» »(+

1164832*
1» »(+

1164825*
1», »(5

1165832*
1», »(5

1164843*
1»7 »(>

1164632*
1»7 »(>

1165229*
1»? »(H

1164632*
1À	 À(

1168729*
1À À(

1163532*
1Ã	 Ã(

11611029*
1Ã	 Ã(

1164625*
1Ã Ã(

1164825*
1Ã Ã(+

1164832*
1Ã Ã(+

1164825*
1Ã, Ã(5

1168932*
1Ã, Ã(5

1164843*
1Ã7 Ã(>

1164632*
1Ã7 Ã(>

1165229*
1Ã? Ã(H

1163532*
1Õ	 Õ(

11611929*
1Õ	 Õ(

1169143*
1Õ Õ(

1164632*
1Õ Õ(

1169329*
1Õ Õ(/

1212124*
1“ “(

1212125*
1“ “(


1212628*
1÷ ÷("

1212625*
1÷	 ÷(

1212629*
1÷) ÷(5

1212625*
1ÿ ÿ(

1213025*
1ÿ ÿ("

1213032*
1ÿ ÿ("

1213025*
1ÿ# ÿ(*

1213332*
1ÿ# ÿ(*

1214628*
1ﬂ ﬂ(

1214625*
1ﬂ	 ﬂ(

1214629*
1ﬂ ﬂ(&

1214625*
1‚ ‚(

1214825*
1‚ ‚("

1214832*
1‚ ‚("

1214825*
1‚# ‚(*

1215032*
1‚# ‚(*

1213532*
1Ë	 Ë(

12112429*
1Ë	 Ë(

1214632*
1Ë Ë(

1218729*
1Ë Ë(+

1214632*
1Î	 Î(

1215429*
1Î Î(

1213532*
1Ï	 Ï(

1215629*
1Ï	 Ï(

1214632*
1Ï Ï(

1218729*
1Ï Ï(*

1213532*
1Ô	 Ô(

12112429*
1Ô	 Ô(

1214632*
1Ô Ô(

1218729*
1Ô Ô(+

1262124*
1Ù Ù(

1262125*
1Ù Ù(


1262628*
1¯ ¯("

1262625*
1¯	 ¯(

1262629*
1¯) ¯(5

1262625*
1˙ ˙(

1263025*
1˙ ˙("

1263032*
1˙ ˙("

1263025*
1˙# ˙(*

1263332*
1˙# ˙(*

1264628*
1Å Å(

1264625*
1Å	 Å(

1264629*
1Å Å(&

1264625*
1Ñ Ñ(

1264825*
1Ñ Ñ("

1264832*
1Ñ Ñ("

1264825*
1Ñ# Ñ(,

1265832*
1Ñ# Ñ(,

1262632*
1à	 à(

1266429*
1à à(#

12612932*
1ä& ä()

12613129*
1ä9 ä(B

12612925*
1ä3 ä(8

1263532*
1ã	 ã(

1263729*
1ã	 ã(

1262632*
1ã- ã(9

1266829*
1ã: ã(J

1262628*
1ë ë(#

1262625*
1ë	 ë(

1262629*
1ë* ë(6

1262625*
1ì ì(

1263025*
1ì ì("

1263032*
1ì ì("

1263025*
1ì# ì()

12613332*
1ì# ì()

1264628*
1ô ô(

1264625*
1ô	 ô(

1264629*
1ô  ô('

1264625*
1ú ú(

1264825*
1ú ú("

1264832*
1ú ú("

1264825*
1ú# ú(,

1265832*
1ú# ú(,

1262632*
1†	 †(

1266429*
1† †($

12612932*
1¢' ¢(*

12613129*
1¢: ¢(C

12612925*
1¢4 ¢(9

1263532*
1£	 £(

1263729*
1£	 £(

1262632*
1£. £(;

1266829*
1£< £(L